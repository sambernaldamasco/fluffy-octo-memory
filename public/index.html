<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="BlogApp">

<head>
  <meta charset="utf-8">
  <title>Blogs</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js" charset="utf-8"> </script>
  <script src="/js/app.js" charset="utf-8"></script>
</head>

<body ng-controller="MainController as ctrl">

  <form ng-submit="ctrl.createPosts()">
    <input type="text" ng-model="ctrl.author" placeholder="author's name">
    <input type="text" ng-model="ctrl.title" placeholder="title">
    <textarea ng-model="ctrl.description"></textarea>
    <input type="submit" value="Add New Post">
  </form>

  <ul ng-repeat="post in ctrl.posts">
    <li>{{post.author}}</li>
    <li>{{post.title}}</li>
    <li>{{post.description}}</li>
    <li>posted on: {{post.date}}</li>
    <li>likes: {{post.likes}}</li>
    <button ng-click="ctrl.addLikes(post)">like this post</button>
    <button
      ng-click="ctrl.indexOfEditForm = $index; ctrl.updatedDescription = post.description"
      ng-if="$index !== ctrl.indexOfEditForm">
        edit
    </button>

    <button
      ng-click="ctrl.deletePosts(post._id)">
       delete this
    </button>

    <form
      ng-if="$index === ctrl.indexOfEditForm"
      ng-submit="ctrl.editPosts(post)">
         <input type="text" ng-model="ctrl.updatedTitle" placeholder="new title">
         <textarea ng-model="ctrl.updatedDescription"></textarea>
         <input type="submit" value="Edit this Post">
    </form>

  </ul>



</body>

</html>
